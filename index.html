<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Comprobantes - Let's Go Travel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --c-blue: #23C3E8; --c-dark-blue: #293241; --c-dark: #1d1d1f; --c-gray: #5f5f63; --c-light-gray: #f0f2f5; --c-mid-gray: #e9ecef; --c-highlight-yellow: #fffb8f; --c-white: #fff; --c-success-green: #3DCA8A;
        }
        body { margin: 0; padding: 0; font-family: 'Poppins', sans-serif; background-color: var(--c-light-gray); color: var(--c-dark); -webkit-font-smoothing: antialiased; }
        .wrapper { max-width: 800px; margin: 40px auto; background-color: var(--c-white); box-shadow: 0 20px 70px rgba(0,0,0,0.1); border-radius: 24px; overflow: hidden; }
        #loader-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: none; justify-content: center; align-items: center; z-index: 1000; flex-direction: column; color: var(--c-white); }
        .spinner { border: 8px solid var(--c-light-gray); border-top: 8px solid var(--c-blue); border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .header { background-color: var(--c-white); padding: 30px; text-align: center; border-bottom: 1px solid #dee2e6; }
        .header img { max-width: 400px; height: auto; }
        .section { padding: 40px; text-align: center; }
        h1, h2, h3 { font-weight: 700; line-height: 1.2; }
        h1 { font-size: 40px; margin-bottom: 10px; }
        .intro-text { font-size: 18px; color: var(--c-gray); max-width: 600px; margin: 0 auto; }
        #form-section { padding-top: 0; }
        form { margin-top: 30px; text-align: left; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { display: flex; flex-direction: column; position: relative; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-group label { font-weight: 600; font-size: 14px; margin-bottom: 8px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px 15px; border-radius: 8px; border: 1px solid #ddd; font-family: 'Poppins', sans-serif; font-size: 16px; box-sizing: border-box; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: var(--c-blue); box-shadow: 0 0 0 3px rgba(35, 195, 232, 0.2); }
        .currency-group { display: flex; gap: 10px; }
        .currency-group input { flex-grow: 1; }
        .currency-group select { width: 100px; }
        .submit-button { display: inline-block; width: 100%; background-color: var(--c-blue); color: var(--c-white); padding: 16px; border-radius: 12px; font-size: 18px; font-weight: 700; border: none; cursor: pointer; margin-top: 30px; transition: background-color 0.2s; }
        .submit-button:hover { background-color: #1fa7c7; }
        #confirmation-section { display: none; padding-bottom: 40px; }
        .confirmation-header { background-image: url('https://i.imgur.com/7Izn0Vp.png'); background-size: cover; background-position: center; padding: 30px; text-align: center; }
        .confirmation-header img { max-width: 350px; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4)); }
        .voucher-content { padding: 30px; text-align: center; }
        .confirmation-title-image { display: block; margin: 0 auto 25px auto; max-width: 534px; width: 100%; height: auto; }
        .voucher, .info-box, .saldo-box, .adicionales-box { background-color: var(--c-light-gray); border: 1px solid #dee2e6; border-radius: 16px; margin-top: 20px; text-align: left; overflow: hidden; }
        .voucher-title { background-color: var(--c-dark-blue); color: var(--c-white); padding: 20px 25px; }
        .voucher-title h2 { font-size: 22px; color: var(--c-blue); margin: 0; }
        .voucher-body { padding: 30px 25px; background-color: white; }
        .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px 30px; }
        .data-item { display: flex; align-items: flex-start; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .data-item:last-child, .data-item.no-border { border-bottom: none; }
        .data-item.full-width { grid-column: 1 / -1; }
        .data-item svg { width: 24px; height: 24px; color: var(--c-blue); flex-shrink: 0; margin-top: 2px; }
        .data-item-content strong { display: block; font-size: 14px; color: var(--c-gray); margin-bottom: 5px; text-transform: uppercase; }
        .data-item-content p { font-size: 16px; font-weight: 600; margin: 0; white-space: pre-wrap; word-wrap: break-word; }
        .saldo-box { background-color: var(--c-highlight-yellow); border-color: #e9d100; padding: 25px; text-align: center; }
        .saldo-box strong { font-size: 18px; color: #5c5a00; font-weight: 700; margin:0; }
        .saldo-box p { font-size: 36px; font-weight: 900; color: var(--c-dark); margin: 5px 0 0 0; }
        .info-box { padding: 30px; }
        .info-box h3 { font-size: 20px; margin: 0 0 20px 0; }
        .info-box ul { padding: 0; margin: 0; list-style-type: none; }
        .info-box li { font-size: 15px; color: var(--c-gray); line-height: 1.7; display: flex; align-items: flex-start; gap: 15px; margin-bottom: 15px;}
        .info-box li svg { flex-shrink: 0; width: 20px; height: 20px; margin-top: 3px; color: var(--c-blue); }
        /* CAMBIO: Estilos para la nueva sección de garantía */
        .garantia-box { padding: 30px; }
        .garantia-box h3 { font-size: 20px; margin: 0 0 20px 0; color: var(--c-dark-blue); }
        .garantia-box h4 { font-size: 16px; font-weight: 700; margin: 20px 0 10px 0; }
        .garantia-box p, .garantia-box li { font-size: 14px; line-height: 1.7; color: var(--c-gray); }
        .garantia-box ul { list-style-position: inside; padding-left: 0; }
        .adicionales-box { padding: 30px; background-color: white; }
        .adicionales-box h3 { font-size: 24px; margin: 0 0 25px 0; text-align: center; color: var(--c-dark-blue); }
        .adicionales-list { display: flex; flex-direction: column; gap: 20px; }
        .adicional-banner { display: flex; flex-direction: row; justify-content: space-between; align-items: flex-end; height: 180px; padding: 25px; border-radius: 16px; background-size: cover; background-position: center; color: var(--c-white); text-decoration: none; position: relative; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .adicional-banner::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 60%); transition: background 0.3s ease; }
        .adicional-banner:hover { transform: translateY(-5px); }
        .adicional-banner:hover::before { background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.1) 70%); }
        #banner-vuelos { background-image: url('https://i.imgur.com/AHIU9al.png'); }
        #banner-tours { background-image: url('https://i.imgur.com/iTeCcU3.png'); }
        #banner-traslados { background-image: url('https://i.imgur.com/UJZulOI.png'); }
        .adicional-banner-content { position: relative; z-index: 2; text-align: left; }
        .adicional-banner-content h4 { font-size: 26px; font-weight: 900; margin: 0 0 4px 0; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        .adicional-banner-content p { font-size: 16px; margin: 0 0 15px 0; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        .adicional-banner-cta { display: inline-flex; align-items: center; gap: 10px; background-color: var(--c-blue); color: var(--c-white); padding: 12px 22px; border-radius: 50px; font-weight: 700; transition: transform 0.2s ease, background-color 0.2s ease; }
        .adicional-banner:hover .adicional-banner-cta { transform: scale(1.05); background-color: #1fa7c7; }
        .adicional-banner-price { position: relative; z-index: 2; text-align: right; }
        .adicional-banner-price .price-label { font-size: 14px; font-weight: 600; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        .adicional-banner-price .price-amount { font-size: 32px; font-weight: 900; line-height: 1; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
        .voucher-footer { padding-top: 20px; text-align: center; }
        .voucher-footer img { max-width: 100%; height: auto; }
        .action-buttons { margin-top: 40px; display: flex; gap: 15px; justify-content: center; padding: 0 20px; }
        .action-button { display: inline-flex; align-items: center; justify-content: center; gap: 10px; padding: 16px 30px; border-radius: 12px; font-size: 18px; font-weight: 700; border: none; cursor: pointer; transition: background-color 0.2s, box-shadow 0.2s; flex-grow: 1; }
        .action-button.download { background-color: var(--c-blue); color: var(--c-white); }
        .action-button.download:hover { background-color: #1fa7c7; }
        .action-button.download:disabled { background-color: #9ddff0; cursor: not-allowed; }
        .action-button.secondary { background-color: var(--c-mid-gray); color: var(--c-dark-blue); }
        .action-button.secondary:hover { background-color: #d1d5da; }
        .pac-container { z-index: 1050 !important; font-family: 'Poppins', sans-serif; border-radius: 8px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); border: 1px solid #ddd;}
        .pac-item { padding: 10px 15px; font-size: 15px; cursor: pointer; border-top: 1px solid #f0f0f0; }
        .pac-item:first-child { border-top: none; }
        .pac-item:hover { background-color: var(--c-light-gray); }
        .pac-item-query { font-weight: 600; color: var(--c-dark); }
        @media (max-width: 768px) {
            .wrapper { margin: 0; border-radius: 0; }
            .section, .voucher-content { padding: 30px 20px; }
            .form-grid { grid-template-columns: 1fr; }
            .data-grid { grid-template-columns: 1fr; }
            .adicional-banner { flex-direction: column; align-items: flex-start; }
            .adicional-banner-content p { max-width: 100%; }
            .adicional-banner-price { align-self: flex-end; margin-top: -30px; }
            .action-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div id="loader-overlay"><div class="spinner"></div><p>Generando PDF...</p></div>

    <div class="wrapper">
        <section class="section" id="form-title-section">
            <header class="header"><img src="https://i.imgur.com/yZwsebB.png" alt="Let's Go Travel"></header>
            <h1 style="margin-top: 30px;">Generador de Comprobantes</h1>
            <p class="intro-text">Completa la siguiente información para generar el comprobante de pre-reserva del cliente.</p>
        </section>

        <section class="section" id="form-section" style="padding-top: 0;">
            <form id="pre-reserva-form">
                <div class="form-grid">
                    <div class="form-group full-width"><label for="destino">Destino (Ciudad o Región)</label><input type="text" id="destino" placeholder="Ej: Punta Cana, República Dominicana" required></div>
                    <div class="form-group full-width"><label for="hotel">Nombre del Hotel</label><input type="text" id="hotel" placeholder="Escribe para autocompletar..." required></div>
                    <div class="form-group"><label for="nombre-completo">Nombre Completo del Titular</label><input type="text" id="nombre-completo" placeholder="Escribe el nombre completo" required></div>
                    <div class="form-group"><label for="documento">Documento de Identidad</label><input type="text" id="documento" placeholder="Escribe el número de documento" required></div>
                    <div class="form-group"><label for="fecha-viaje">Fecha de Check-in</label><input type="date" id="fecha-viaje" required></div>
                    <div class="form-group"><label for="cantidad-noches">Cantidad de Noches</label><select id="cantidad-noches" required><option value="1">1 noche</option><option value="2">2 noches</option><option value="3">3 noches</option><option value="4" selected>4 noches</option><option value="5">5 noches</option><option value="6">6 noches</option><option value="7">7 noches</option><option value="8">8 noches</option><option value="9">9 noches</option><option value="10">10 noches</option><option value="11">11 noches</option><option value="12">12 noches</option><option value="13">13 noches</option><option value="14">14 noches</option><option value="15">15 noches</option><option value="16">16 noches</option><option value="17">17 noches</option><option value="18">18 noches</option><option value="19">19 noches</option><option value="20">20 noches</option><option value="21">21 noches</option><option value="22">22 noches</option><option value="23">23 noches</option><option value="24">24 noches</option><option value="25">25 noches</option><option value="26">26 noches</option><option value="27">27 noches</option><option value="28">28 noches</option><option value="29">29 noches</option><option value="30">30 noches</option></select></div>
                    <div class="form-group"><label for="cantidad-habitaciones">Cantidad de Habitaciones</label><select id="cantidad-habitaciones" required><option value="1" selected>1 habitación</option><option value="2">2 habitaciones</option><option value="3">3 habitaciones</option><option value="4">4 habitaciones</option><option value="5">5 habitaciones</option><option value="6">6 habitaciones</option><option value="7">7 habitaciones</option><option value="8">8 habitaciones</option><option value="9">9 habitaciones</option><option value="10">10 habitaciones</option></select></div>
                    <div class="form-group"><label for="localizador">Localizador del Hotel</label><input type="text" id="localizador" placeholder="Código de reserva del hotel"></div>
                    <div class="form-group full-width"><label for="regimen">Régimen</label><select id="regimen" required><option value="Solo hotel">Solo hotel</option><option value="Hotel y desayuno">Hotel y desayuno</option><option value="Media Pensión">Media Pensión</option><option value="Pensión Completa">Pensión Completa</option><option value="Todo incluido" selected>Todo incluido</option></select></div>
                    <div class="form-group full-width"><label for="valor-restante">Saldo Restante Hotelero</label><div class="currency-group"><input type="text" id="valor-restante" inputmode="numeric" placeholder="Ej: 1500000"><select id="moneda"><option value="COP" selected>COP</option><option value="USD">USD</option></select></div></div>
                    <div class="form-group full-width"><label for="acompanantes">Nombres de los Acompañantes</label><textarea id="acompanantes" placeholder="Escribe los nombres completos, uno por línea"></textarea></div>
                    <div class="form-group full-width"><label for="observaciones">Notas u Observaciones Adicionales</label><textarea id="observaciones" placeholder="Añade aquí cualquier detalle importante..."></textarea></div>
                </div>
                <button type="submit" class="submit-button">Generar Comprobante</button>
            </form>
        </section>

        <div id="confirmation-section">
            <div id="voucher-to-print">
                <header class="confirmation-header"><img src="https://i.imgur.com/yZwsebB.png" alt="Let's Go Travel Logo"></header>
                <div class="voucher-content">
                    <img src="https://i.imgur.com/dyomJpx.png" alt="Pre-Reserva Confirmada" class="confirmation-title-image">
                    
                    <p class="intro-text">¡Felicidades, <span id="confirm-nombre-intro" style="font-weight:700;"></span>! Aquí está el resumen de tu próximo viaje.</p>
                    
                    <div class="voucher">
                        <div class="voucher-title"><h2>Resumen del Viaje</h2></div>
                        <div class="voucher-body"><div class="data-grid">
                            <div class="data-item full-width"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="data-item-content"><strong>Destino:</strong><p id="confirm-destino"></p></div></div>
                            <div class="data-item full-width"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg><div class="data-item-content"><strong>Hotel:</strong><p id="confirm-hotel"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><div class="data-item-content"><strong>Check-in:</strong><p id="confirm-checkin"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><div class="data-item-content"><strong>Check-out:</strong><p id="confirm-checkout"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg><div class="data-item-content"><strong>Noches:</strong><p id="confirm-noches"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7h2a2 2 0 012 2v9a2 2 0 01-2 2h-2m-6 0H7a2 2 0 01-2-2V9a2 2 0 012-2h2m4-4h2a2 2 0 012 2v2H9V5a2 2 0 012-2zM9 12h6"></path></svg><div class="data-item-content"><strong>Habitaciones:</strong><p id="confirm-habitaciones"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg><div class="data-item-content"><strong>Localizador:</strong><p id="confirm-localizador"></p></div></div>
                            <div class="data-item no-border"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21.25 12a9.25 9.25 0 11-18.5 0 9.25 9.25 0 0118.5 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12v3M15 12v3"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.646 16.354L12 16h.002l.352.354a.5.5 0 01-.706 0zM12 3C6.477 3 2 7.477 2 13s4.477 10 10 10 10-4.477 10-10c0-5.522-4.477-9.998-10-9.998zm0 1.5a8.5 8.5 0 100 17 8.5 8.5 0 000-17z"></path></svg><div class="data-item-content"><strong>Régimen:</strong><p id="confirm-regimen"></p></div></div>
                            <div class="data-item full-width"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><div class="data-item-content"><strong>Notas:</strong><p id="confirm-observaciones">Ninguna</p></div></div>
                        </div></div>
                    </div>
                    <div class="voucher">
                        <div class="voucher-title"><h2>Información de los Viajeros</h2></div>
                        <div class="voucher-body"><div class="data-grid">
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg><div class="data-item-content"><strong>Titular:</strong><p id="confirm-nombre"></p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H4a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg><div class="data-item-content"><strong>Documento:</strong><p id="confirm-documento"></p></div></div>
                            <div class="data-item full-width"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg><div class="data-item-content"><strong>Acompañantes:</strong><p id="confirm-acompanantes">No especificado</p></div></div>
                        </div></div>
                    </div>
                    
                    <div class="saldo-box"><strong>Saldo Restante (Parte Hotelera):</strong><p id="confirm-valor-restante"></p></div>
                    <div class="info-box"><h3>Detalles de tu Plan</h3><ul><li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg><span id="confirm-plan-incluye"></span></li></ul></div>
                    
                    <div class="garantia-box">
                        <h3>Política de Reprogramación y Garantía</h3>
                        <p>Política de Flexibilidad - Resumen Clave:
Validez: 12 meses para usar tu estadía desde tu primer pago.
Alcance: Aplica solo al hotel. No incluye aéreos ni otros servicios.
Aviso: Cambios deben solicitarse con un mínimo de 60 días de antelación.
Gestión: 1er cambio gratis. Siguientes conllevan una penalidad.
Condición Principal: Todo cambio está sujeto a disponibilidad y al pago de la diferencia de tarifa si las nuevas fechas son más costosas.
Vencimiento: No usar la reserva en 12 meses o incumplir las reglas implica la pérdida total de lo abonado.</p>
                    </div>

                    <div class="adicionales-box">
                        <h3>¿Necesitas algo más para tu viaje?</h3>
                        <div class="adicionales-list">
                            <a href="#" target="_blank" class="adicional-banner" id="banner-vuelos">
                                <div class="adicional-banner-content">
                                    <h4>Tiquetes Aéreos</h4>
                                    <p>Las mejores tarifas aéreas.</p>
                                    <div class="adicional-banner-cta">Cotizar ahora</div>
                                </div>
                                <div class="adicional-banner-price">
                                    <div class="price-label">Desde</div>
                                    <div class="price-amount">$1.250.000</div>
                                </div>
                            </a>
                            <a href="#" target="_blank" class="adicional-banner" id="banner-tours">
                                <div class="adicional-banner-content">
                                    <h4>Tours y Actividades</h4>
                                    <p>Aventura, cultura y diversión.</p>
                                    <div class="adicional-banner-cta">Cotizar ahora</div>
                                </div>
                                <div class="adicional-banner-price">
                                    <div class="price-label">Desde</div>
                                    <div class="price-amount">$290.000</div>
                                </div>
                            </a>
                            <a href="#" target="_blank" class="adicional-banner" id="banner-traslados">
                                <div class="adicional-banner-content">
                                    <h4>Traslados Privados</h4>
                                    <p>Comodidad y seguridad.</p>
                                    <div class="adicional-banner-cta">Cotizar ahora</div>
                                </div>
                                <div class="adicional-banner-price">
                                    <div class="price-label">Desde</div>
                                    <div class="price-amount">$180.000</div>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="voucher">
                        <div class="voucher-title"><h2>Información Corporativa</h2></div>
                        <div class="voucher-body"><div class="data-grid">
                            <div class="data-item full-width"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg><div class="data-item-content"><strong>Dirección:</strong><p>Cra 43 #15 Sur 15 Piso 7 Edificio Xerox, El Poblado, Medellín, Antioquia, Colombia</p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H4a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg><div class="data-item-content"><strong>NIT:</strong><p>901830599-9</p></div></div>
                            <div class="data-item"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg><div class="data-item-content"><strong>RNT:</strong><p>209255</p></div></div>
                        </div></div>
                    </div>

                    <div class="voucher-footer">
                        <a href="https://wa.me/573147294382" target="_blank" id="footer-wpp-link">
                            <img src="https://i.imgur.com/Kx3iAqH.png" alt="Información de contacto y horario de atención">
                        </a>
                    </div>
                </div>
            </div>
            <div class="action-buttons"><button class="action-button download" id="download-btn">Descargar (PDF)</button><button class="action-button secondary" id="new-voucher-btn">Crear Nuevo Comprobante</button></div>
        </div>
    </div>
    
    <script>
    function initAutocomplete() {
        const destinoInput = document.getElementById('destino');
        const hotelInput = document.getElementById('hotel');
        const destinoAutocomplete = new google.maps.places.Autocomplete(destinoInput, { types: ['(cities)'], fields: ['geometry'] });
        const hotelAutocomplete = new google.maps.places.Autocomplete(hotelInput, { types: ['establishment'], fields: ['name'] });
        destinoAutocomplete.addListener('place_changed', () => {
            const place = destinoAutocomplete.getPlace();
            if (place.geometry && place.geometry.viewport) { hotelAutocomplete.setBounds(place.geometry.viewport); }
        });
        hotelAutocomplete.addListener('place_changed', () => {
            const place = hotelAutocomplete.getPlace();
            if (place.name) { hotelInput.value = place.name; }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        const config = { whatsappNumber: '573147294382' }; // El officeFooter ya no es necesario
        const form = document.getElementById('pre-reserva-form');
        const formTitleSection = document.getElementById('form-title-section');
        const formSection = document.getElementById('form-section');
        const confirmationSection = document.getElementById('confirmation-section');
        const downloadBtn = document.getElementById('download-btn');
        const newVoucherBtn = document.getElementById('new-voucher-btn');
        const loaderOverlay = document.getElementById('loader-overlay');
        function formatCurrency(value, currency) {
            const number = parseFloat(String(value).replace(/[^0-9.-]+/g, ""));
            if (isNaN(number)) { return currency === 'COP' ? '$ 0 COP' : '$ 0.00 USD'; }
            const options = currency === 'COP' ? { style: 'currency', currency: 'COP', minimumFractionDigits: 0, maximumFractionDigits: 0 } : { style: 'currency', currency: 'USD', minimumFractionDigits: 2, maximumFractionDigits: 2 };
            return number.toLocaleString(currency === 'COP' ? 'es-CO' : 'en-US', options);
        }
        function toggleLoader(show) { loaderOverlay.style.display = show ? 'flex' : 'none'; }
        function formatDate(date) { return date.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' }); }
        
        function populateVoucher() {
            const data = {
                destino: document.getElementById('destino').value, nombre: document.getElementById('nombre-completo').value, documento: document.getElementById('documento').value, fechaInput: document.getElementById('fecha-viaje').value, noches: document.getElementById('cantidad-noches').value, hotel: document.getElementById('hotel').value, localizador: document.getElementById('localizador').value || 'Pendiente', 
                habitaciones: document.getElementById('cantidad-habitaciones').value, valorRestante: document.getElementById('valor-restante').value, moneda: document.getElementById('moneda').value, regimen: document.getElementById('regimen').value, acompanantes: document.getElementById('acompanantes').value, observaciones: document.getElementById('observaciones').value,
            };
            const nochesInt = parseInt(data.noches, 10);
            const checkInDate = new Date(data.fechaInput + 'T00:00:00');
            const checkOutDate = new Date(checkInDate);
            checkOutDate.setDate(checkOutDate.getDate() + nochesInt);
            const fechaCheckInFormateada = formatDate(checkInDate);
            const fechaCheckOutFormateada = formatDate(checkOutDate);
            const valorFormateado = formatCurrency(data.valorRestante, data.moneda) + ' ' + data.moneda;
            
            const habitacionesInt = parseInt(data.habitaciones, 10);
            const habitacionesTexto = `${habitacionesInt} ${habitacionesInt > 1 ? 'habitaciones' : 'habitación'}`;

            let planDescription = '';
            switch(data.regimen) {
                case 'Solo hotel': planDescription = '<strong>Plan Incluye:</strong> Alojamiento según las noches estipuladas.'; break;
                case 'Hotel y desayuno': planDescription = '<strong>Plan Incluye:</strong> Alojamiento y Desayuno diario.'; break;
                case 'Media Pensión': planDescription = '<strong>Plan Incluye:</strong> Alojamiento, Desayuno y una comida principal.'; break;
                case 'Pensión Completa': planDescription = '<strong>Plan Incluye:</strong> Alojamiento, Desayuno, Almuerzo, Cena y Snacks.'; break;
                case 'Todo incluido': planDescription = '<strong>Plan Incluye:</strong> Alojamiento, todas las comidas, bebidas y snacks ilimitados.'; break;
            }
            document.getElementById('confirm-nombre-intro').textContent = data.nombre;
            document.getElementById('confirm-destino').textContent = data.destino;
            document.getElementById('confirm-hotel').textContent = data.hotel;
            document.getElementById('confirm-localizador').textContent = data.localizador;
            document.getElementById('confirm-regimen').textContent = data.regimen;
            document.getElementById('confirm-habitaciones').textContent = habitacionesTexto;
            document.getElementById('confirm-nombre').textContent = data.nombre;
            document.getElementById('confirm-documento').textContent = data.documento;
            document.getElementById('confirm-acompanantes').textContent = data.acompanantes.trim() || 'No especificado';
            document.getElementById('confirm-checkin').textContent = fechaCheckInFormateada;
            document.getElementById('confirm-checkout').textContent = fechaCheckOutFormateada;
            document.getElementById('confirm-noches').textContent = `${nochesInt} ${nochesInt > 1 ? 'noches' : 'noche'}`;
            document.getElementById('confirm-observaciones').textContent = data.observaciones.trim() || 'Ninguna';
            document.getElementById('confirm-valor-restante').textContent = valorFormateado;
            document.getElementById('confirm-plan-incluye').innerHTML = planDescription;
            const msgVuelos = encodeURIComponent(`Hola, estoy interesado en cotizar tiquetes aéreos para mi reserva a ${data.destino}. Titular: ${data.nombre}`);
            const msgTours = encodeURIComponent(`Hola, me gustaría información sobre tours y actividades para mi reserva en ${data.hotel}. Titular: ${data.nombre}`);
            const msgTraslados = encodeURIComponent(`Hola, necesito cotizar los traslados privados para mi reserva en ${data.hotel}. Titular: ${data.nombre}`);
            document.getElementById('banner-vuelos').href = `https://wa.me/${config.whatsappNumber}?text=${msgVuelos}`;
            document.getElementById('banner-tours').href = `https://wa.me/${config.whatsappNumber}?text=${msgTours}`;
            document.getElementById('banner-traslados').href = `https://wa.me/${config.whatsappNumber}?text=${msgTraslados}`;
        }
        function addLinkToPDF(pdf, elementId, container, scaleFactor) {
            const element = document.getElementById(elementId);
            if (!element) return;
            const rect = element.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();
            const x = (rect.left - containerRect.left) * scaleFactor;
            const y = (rect.top - containerRect.top) * scaleFactor;
            const w = rect.width * scaleFactor;
            const h = rect.height * scaleFactor;
            pdf.link(x, y, w, h, { url: element.href });
        }
        async function generatePDF() {
            toggleLoader(true); downloadBtn.disabled = true;
            const elementToPrint = document.getElementById('voucher-to-print');
            const { jsPDF } = window.jspdf;
            try {
                const canvas = await html2canvas(elementToPrint, { 
                    scale: 2, 
                    useCORS: true,
                    allowTaint: true 
                });
                
                const imgData = canvas.toDataURL('image/png');
                const pdfWidth = 210; 
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                const pdf = new jsPDF('p', 'mm', [pdfWidth, pdfHeight]);
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);

                const scaleFactor = pdfWidth / elementToPrint.offsetWidth;
                addLinkToPDF(pdf, 'banner-vuelos', elementToPrint, scaleFactor);
                addLinkToPDF(pdf, 'banner-tours', elementToPrint, scaleFactor);
                addLinkToPDF(pdf, 'banner-traslados', elementToPrint, scaleFactor);
                addLinkToPDF(pdf, 'footer-wpp-link', elementToPrint, scaleFactor);
                
                const nombreCliente = document.getElementById('nombre-completo').value.replace(/ /g, '_');
                const destino = document.getElementById('destino').value.replace(/,/g, '').replace(/ /g, '_');
                const fileName = `Comprobante_${nombreCliente}_${destino}.pdf`;
                pdf.save(fileName);

            } catch (error) {
                console.error("Error al generar el PDF:", error);
                alert("Hubo un error al generar el PDF. Por favor, inténtalo de nuevo.");
            } finally {
                toggleLoader(false); downloadBtn.disabled = false;
            }
        }
        form.addEventListener('submit', (event) => {
            event.preventDefault(); populateVoucher();
            formTitleSection.style.display = 'none'; formSection.style.display = 'none'; confirmationSection.style.display = 'block'; window.scrollTo(0, 0);
        });
        downloadBtn.addEventListener('click', generatePDF);
        newVoucherBtn.addEventListener('click', () => {
            confirmationSection.style.display = 'none'; formTitleSection.style.display = 'block'; formSection.style.display = 'block'; form.reset();
            document.getElementById('fecha-viaje').min = new Date().toISOString().split("T")[0]; window.scrollTo(0, 0);
        });
        document.getElementById('valor-restante').addEventListener('input', function (e) { e.target.value = e.target.value.replace(/[^0-9]/g, ''); });
        document.getElementById('fecha-viaje').min = new Date().toISOString().split("T")[0];
    });
    </script>
    
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASTSvQgNsR-4wQeIuHAd6S9_fTmaKG56g&libraries=places&callback=initAutocomplete"></script>

</body>
</html>